# DWH_KDZ

## Описание
Проект представляет собой хранилище данных (DWH) на основе PostgreSQL, развернутое с использованием Docker. Хранилище предназначено для обработки и анализа данных о рейсах и погодных условиях, включая этапы ODS, Staging и DDS.

---

## Структура проекта

### 1. **csv_data/**
Содержит входные данные в формате CSV, которые будут использоваться для загрузки в базу данных:
- `flight_statistics_test_data.csv` — данные о статистике рейсов.
- `weather_conditions_test_data.csv` — данные о погодных условиях.

### 2. **ddl/**
SQL-скрипты для создания структуры базы данных:
- **dds/** — скрипты для уровня DDS (Detailed Data Store).
- `ods.sql` — скрипт для создания уровня ODS.
- `staging.sql` — скрипт для создания уровня Staging.

### 3. **dml/**
SQL-скрипты для вставки и обработки данных:
- **staging/** — скрипты для обработки данных на уровне Staging:
  - `flight_statistics.sql`
  - `weather_conditions.sql`
- `ods.sql` — скрипты для загрузки данных в ODS.

### 4. **postgres_data/**
Директория для хранения данных PostgreSQL. Эта папка монтируется в контейнер.

### 5. **docker-compose.yml**
Файл конфигурации для развертывания PostgreSQL с использованием Docker Compose.

### 6. **prescript.sh**
Скрипт для выполнения предварительных операций перед запуском контейнера.

### 7. **README.md**
Файл с описанием проекта и инструкциями по работе.

---

## Инструкция

### Шаг 1: Подготовка
1. Убедитесь, что у вас установлен Docker и Docker Compose.
2. Установите права на выполнение скрипта:
```bash
chmod +x ./prescript.sh
```

### Шаг 2: Выполнение предварительных операций

Запустите скрипт предварительных операций:
```bash
./prescript.sh
```

### Шаг 3: Запуск контейнера

Запустите контейнер PostgreSQL:
```bash
docker-compose up -d --build
```

### Шаг 4: Остановка контейнера

Для выключения контейнера выполните:
```bash
docker-compose down
```

## Использование

### Подключение к базе данных

Подключитесь к базе данных с помощью любого SQL-клиента. Параметры подключения:
	*	Хост: `localhost`
	*	Порт: `6432`
	*	Пользователь: `your_user`
	*	Пароль: `your_password`
	*	База данных: `your_database`

### Загрузка данных из CSV

1.	Убедитесь, что файлы CSV находятся в папке csv_data.
2.	Используйте SQL-команду COPY для загрузки данных:

```sql
COPY ods.flight_statistics (column1, column2, ...)
FROM '/csv_data/flight_statistics_test_data.csv'
DELIMITER ','
CSV HEADER;
```

